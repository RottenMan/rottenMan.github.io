<!DOCTYPE html><html lang="en" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png"><link rel="icon" type="image/png" href="/img/FD.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content="è®°å½•å­¦ä¹ çš„ç‚¹ç‚¹æ»´æ»´"><meta name="author" content="ä¸æ„¿é€éœ²å§“åçš„å‘¨å…ˆç”Ÿ"><meta name="keywords" content="å‰ç«¯,JavaScript,æŠ€æœ¯,ä¸ªäººåšå®¢,å­¦ä¹ ,ç¬”è®°,å‘¨æ–°æ¡¥,å‰ç«¯ç¨‹åºå‘˜,æŠ€æœ¯åšå®¢,åºŸç‰©,kkfive, "><title>NodeJs æ–‡ä»¶æ“ä½œ - çœ‹çœ‹åºŸç‰©çš„åšå®¢</title><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.1.2/styles/pojoaque.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"www.kkfive.com",root:"/",version:"1.8.5",typing:{enable:!0,typeSpeed:70,cursorChar:"ğŸ›¸",loop:!1},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},copy_btn:!0,image_zoom:{enable:!0},lazyload:{enable:!0,onlypost:!1},web_analytics:{enable:!0,baidu:"7c3a86d2ad975111fcb1544184425260",google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"> <a class="navbar-brand" href="/">&nbsp;<strong>åºŸç‰©çš„ä¸»é¡µ</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> ä¸»é¡µ</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> æ–‡ç« </a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> åˆ†ç±»</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> æ ‡ç­¾</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> å…³äº</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> å‹é“¾</a></li><li class="nav-item" id="search-btn"> <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"> <a class="nav-link" href="javascript:">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner intro-2" id="background" parallax="true" style="background:url(https://darrenclover.gitee.io/img/guidang.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="NodeJs æ–‡ä»¶æ“ä½œ"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2020-09-27 19:04" pubdate>September 27, 2020 pm</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.8k å­—</span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 36 åˆ†é’Ÿ</span></div></div></div></div></div></header><main><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="container nopadding-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">NodeJs æ–‡ä»¶æ“ä½œ</h1><div class="markdown-body"><h2 id="HTTPæ¨¡å—"><a href="#HTTPæ¨¡å—" class="headerlink" title="HTTPæ¨¡å—"></a>HTTPæ¨¡å—</h2><p><code>HTTP</code>æ¨¡å—çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œ<code>HTTP</code>æ˜¯Nodeçš„å†…ç½®æ¨¡å—ï¼Œä¸ç”¨åœ¨å•ç‹¬ä¸‹è½½</p><p>ä½¿ç”¨<code>requier</code>æŒ‡ä»¤æ¥å¯¼å…¥httpæ¨¡å—ï¼Œå°†å®ä¾‹åŒ–çš„<code>HTTP</code>èµ‹å€¼ç»™<code>http</code></p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);</code></pre></div><p>ä½¿ç”¨<code>http</code>æ¨¡å—çš„<code>createServer()</code> æ–¹æ³•åˆ›å»ºæœåŠ¡å™¨ï¼Œä½¿ç”¨<code>listen</code> æ–¹æ³•ç»‘å®šç«¯å£å·ï¼Œ<code>listen</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¦ç»‘å®šçš„ç«¯å£å·ï¼Œç¬¬äºŒä¸ªå‚æ•°æœåŠ¡å¯åŠ¨æˆåŠŸåæ‰§è¡Œçš„å›è°ƒå‡½æ•°<code>createServer(</code>)æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°,<code>request</code>, <code>response</code>åˆ†åˆ«è¡¨ç¤ºæ¥æ”¶æ•°æ®å’Œå“åº”æ•°æ®ï¼ŒåŸºæœ¬ç»“æ„å¦‚ä»¥ä¸‹ä»£ç </p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);

<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">request, response</span>) =&gt;</span> &#123;
  response.end(<span class="hljs-string">&quot;hello&quot;</span>);
&#125;);

server.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ è¯·è®¿é—® http://localhost:3000/&quot;</span>);
&#125;);
</code></pre></div><p><code>response.end(&quot;hello&quot;)</code>å‘é¡µé¢å“åº”æ•°æ®ï¼Œè®¿é—®<a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000/</a> å°±å¯ä»¥çœ‹åˆ°å“åº”çš„æ•°æ®</p><p><img src="https://files.alexhchu.com/2020/09/25/2c3039caffbd1.png" srcset="/img/loading.gif" alt="image-20200925200231905"></p><p>å¦‚æœå“åº”çš„æ•°æ®ä¸ºä¸­æ–‡ï¼Œåˆ™ä¼šå‡ºç°ä¹±ç </p><p><img src="https://files.alexhchu.com/2020/09/25/465da338c39e2.png" srcset="/img/loading.gif" alt="image-20200925202709457"></p><p>å‡ºç°ä¹±ç çš„åŸå› æ˜¯å¤´éƒ¨ç¼–ç ï¼Œåœ¨å“åº”å‰è®¾ç½®ç¼–ç å¤´ä¿¡æ¯å°±å¯ä»¥è§£å†³</p><div class="hljs"><pre><code class="hljs javascript">response.setHeader(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>);</code></pre></div><h2 id="FSæ¨¡å—"><a href="#FSæ¨¡å—" class="headerlink" title="FSæ¨¡å—"></a>FSæ¨¡å—</h2><p><code>FS</code>æ¨¡å—çš„ä½œç”¨æ˜¯ç”¨æ¥è¯»å†™æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œäº¤äº’çš„æ¨¡å—</p><p>é€šè¿‡<code>required</code>æ¥å¼•å…¥æ¨¡å—</p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);</code></pre></div><p><code>FS</code>æ¨¡å—ä¸­æœ‰ä¸¤ç§æ‰æ“ä½œå½¢å¼ï¼šåŒæ­¥å’Œå¼‚æ­¥</p><ul><li>åŒæ­¥ï¼šä¼šé˜»å¡ç¨‹åºçš„è¿›è¡Œï¼Œç­‰æ–‡ä»¶å…¨éƒ¨è¯»å–å®Œæ¯•æ‰ä¼šå‘ä¸‹æ‰§è¡Œä»£ç </li><li>å¼‚æ­¥ï¼šä¸ä¼šé˜»å¡ç¨‹åºçš„è¿›è¡Œï¼Œåœ¨è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡Œå…¶ä»–çš„æ“ä½œ</li></ul><h3 id="è¯»å–æ–‡ä»¶"><a href="#è¯»å–æ–‡ä»¶" class="headerlink" title="è¯»å–æ–‡ä»¶"></a>è¯»å–æ–‡ä»¶</h3><p><strong>åŒæ­¥æ“ä½œ</strong></p><p><code>fs.readFileSync</code>æ–¹æ³•æ˜¯åŒæ­¥æ¥è¯»å–æ–‡ä»¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªtxtæ–‡ä»¶ï¼Œéšä¾¿å†™ç‚¹å†…å®¹</p><p><img src="https://files.alexhchu.com/2020/09/25/50a0b6c1f8cbd.png" srcset="/img/loading.gif" alt="image-20200925201404951"></p><p>ç„¶åé€šè¿‡<code>fs.readFileSync</code>æ¥è¯»å–æ–‡ä»¶ï¼Œå¹¶å“åº”åˆ°é¡µé¢ä¸­</p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);

<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">request, response</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">let</span> res = fs.readFileSync(<span class="hljs-string">&quot;./1.txt&quot;</span>);
  response.end(res);
&#125;);

server.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ è¯·è®¿é—® http://localhost:3000/&quot;</span>);
&#125;);</code></pre></div><p>è®¿é—®<a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000/</a> å°±å¯ä»¥çœ‹åˆ°æ–‡ä»¶ä¸­çš„å†…å®¹</p><p><img src="https://files.alexhchu.com/2020/09/25/1e4df5f74353d.png" srcset="/img/loading.gif" alt="image-20200925201655775"></p><p><strong>å¼‚æ­¥æ“ä½œ</strong></p><p><code>fs.readFile()</code>æ–¹æ³•æ˜¯æ¥å¼‚æ­¥è¯»å–æ–‡ä»¶ï¼Œå¼‚æ­¥å’ŒåŒæ­¥è¯»å–æ–¹æ³•çš„åŒºåˆ«å°±æ˜¯æ˜¯å¦å¸¦æœ‰<code>Sync</code>å…³é”®å­—ï¼Œå‡¡æ˜¯åŠ äº†<code>Sync</code>çš„æ–¹æ³•åŒæ­¥æ“ä½œï¼Œå¦åˆ™å°±æ˜¯å¼‚æ­¥æ“ä½œ</p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);

<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">request, response</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">let</span> res = fs.readFile(<span class="hljs-string">&quot;./1.txt&quot;</span>);
  response.end(res);
&#125;);

server.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ è¯·è®¿é—® http://localhost:3000/&quot;</span>);
&#125;);</code></pre></div><p>è®¿é—®<a target="_blank" rel="noopener" href="http://localhost:3000/%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E7%9C%8B%E5%88%B0%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%86%85%E5%AE%B9">http://localhost:3000/å¯ä»¥æ­£å¸¸çœ‹åˆ°è¯»å–æ–‡ä»¶ä¸­çš„å†…å®¹</a></p><p><img src="https://files.alexhchu.com/2020/09/25/1e4df5f74353d.png" srcset="/img/loading.gif" alt="image-20200925201655775"></p><h3 id="å†™å…¥æ–‡ä»¶"><a href="#å†™å…¥æ–‡ä»¶" class="headerlink" title="å†™å…¥æ–‡ä»¶"></a>å†™å…¥æ–‡ä»¶</h3><p><code>fs.writeFileSync()</code>æ–¹æ³•ï¼šæ¥æ”¶å››ä¸ªå‚æ•° <code>fs.writeFile(file, data[, options], callback)</code></p><ul><li>file - æ–‡ä»¶åæˆ–æ–‡ä»¶æè¿°ç¬¦</li><li>data - è¦å†™å…¥æ–‡ä»¶çš„æ•°æ®</li><li>options - è¯¥å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡,ç”¨æ¥è¡¨æ˜å†™å…¥çš„è¡Œä¸º<ul><li>r+ ï¼š è¯»å–æ–‡ä»¶</li><li>w+ ï¼š æ‰“å¼€æ–‡ä»¶ç”¨äºè¯»å†™ï¼Œä¼šè¦†ç›–ç›®æ ‡æ–‡ä»¶çš„åŸå†…å®¹ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</li><li>a ï¼šè¿½åŠ å†™å…¥ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ã€‚</li></ul></li><li>callback - å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°åªåŒ…å«é”™è¯¯ä¿¡æ¯å‚æ•°(err)ï¼Œåœ¨å†™å…¥å¤±è´¥æ—¶è¿”å›</li></ul><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);

<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">request, response</span>) =&gt;</span> &#123;
  response.setHeader(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>);
  fs.writeFileSync(<span class="hljs-string">&quot;2.txt&quot;</span>, <span class="hljs-string">&quot;Hello world&quot;</span>, &#123; <span class="hljs-attr">flag</span>: <span class="hljs-string">&quot;w&quot;</span> &#125;, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;
    <span class="hljs-keyword">if</span> (err) &#123;
      <span class="hljs-built_in">console</span>.log(err);
    &#125;
  &#125;);
  response.end(<span class="hljs-string">&quot;ä½ å¥½&quot;</span>);
&#125;);

server.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ è¯·è®¿é—® http://localhost:3000/&quot;</span>);
&#125;);</code></pre></div><p>å‘2.txtæ–‡ä»¶ä¸­å†™å…¥å†…å®¹hello worldï¼Œå¦‚æœ2.txtæ²¡æœ‰ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»º</p><p>æ‰“å¼€2.txtå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšæ‰å†™å…¥çš„å†…å®¹</p><p><img src="https://files.alexhchu.com/2020/09/25/fa515160f3897.png" srcset="/img/loading.gif" alt="image-20200925213612961"></p><p>å¦‚æœæˆ‘ä»¬æ›´æ”¹ä¸€ä¸‹å†™å…¥çš„å†…å®¹ï¼Œé‡æ–°è¿è¡Œä»£ç ï¼Œä¼šå‘ç°ä¹‹å‰å†™å…¥çš„å†…å®¹æ¶ˆå¤±äº†ï¼Œè€Œæ˜¾ç¤ºçš„æ˜¯æ–°å†™å…¥çš„å†…å®¹</p><div class="hljs"><pre><code class="hljs javascript">fs.writeFileSync(<span class="hljs-string">&quot;2.txt&quot;</span>, <span class="hljs-string">&quot;æœ¨æ˜“&quot;</span>, &#123; <span class="hljs-attr">flag</span>: <span class="hljs-string">&quot;w&quot;</span> &#125;, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;
    <span class="hljs-keyword">if</span> (err) &#123;
      <span class="hljs-built_in">console</span>.log(err);
    &#125;
  &#125;);</code></pre></div><p><img src="https://files.alexhchu.com/2020/09/25/990be9b74c767.png" srcset="/img/loading.gif" alt="image-20200925214449339"></p><p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„å†™å…¥è¡Œä¸ºæ˜¯<code>w</code>ï¼Œä¼šè¦†ç›–æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå°†å†™å…¥è¡Œä¸ºæ”¹ä¸º<code>a</code>å°±å¯ä»¥è¿½åŠ å†™å…¥äº†</p><div class="hljs"><pre><code class="hljs javascript">fs.writeFileSync(<span class="hljs-string">&quot;2.txt&quot;</span>, <span class="hljs-string">&quot;åšå®¢&quot;</span>, &#123; <span class="hljs-attr">flag</span>: <span class="hljs-string">&quot;a&quot;</span> &#125;, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;
    <span class="hljs-keyword">if</span> (err) &#123;
      <span class="hljs-built_in">console</span>.log(err);
    &#125;
  &#125;);</code></pre></div><p><img src="https://files.alexhchu.com/2020/09/25/dbee4a29bb43f.png" srcset="/img/loading.gif" alt="image-20200925214621462"></p><h3 id="ä¿®æ”¹æ–‡ä»¶å"><a href="#ä¿®æ”¹æ–‡ä»¶å" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶å"></a>ä¿®æ”¹æ–‡ä»¶å</h3><p>ä½¿ç”¨ <code>fs.rename()</code> æˆ– <code>fs.renameSync()</code> å¯ä»¥é‡å‘½åæ–‡ä»¶ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°è¦è¢«ä¿®æ”¹çš„æ–‡ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–°çš„æ–‡ä»¶å</p><p>ç°åœ¨å°†2.txté‡å‘½åä¸º3.txtï¼Œä»£ç å¦‚ä¸‹</p><div class="hljs"><pre><code class="hljs javascript">fs.rename(<span class="hljs-string">&quot;2.txt&quot;</span>, <span class="hljs-string">&quot;3.txt&quot;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">if</span> (err) &#123;
    <span class="hljs-built_in">console</span>.log(err);
  &#125;
&#125;);</code></pre></div><h3 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h3><p><code>fs.unlink()</code>æ–¹æ³•å¯ä»¥åˆ é™¤æŒ‡å®šçš„æ–‡ä»¶ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¦åˆ é™¤çš„æ–‡ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæŠ¥é”™æ—¶è¿è¡Œçš„å›è°ƒå‡½æ•°</p><p>ç°åœ¨å°†3.txtè¿›è¡Œåˆ é™¤ï¼Œä»£ç å¦‚ä¸‹</p><div class="hljs"><pre><code class="hljs javascript">fs.unlink(<span class="hljs-string">&quot;3.txt&quot;</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">if</span> (err) &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(err);
  &#125;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);
&#125;);</code></pre></div><h3 id="æµæ–¹å¼è¯»å–æ–‡ä»¶"><a href="#æµæ–¹å¼è¯»å–æ–‡ä»¶" class="headerlink" title="æµæ–¹å¼è¯»å–æ–‡ä»¶"></a>æµæ–¹å¼è¯»å–æ–‡ä»¶</h3><p><code>fs.readFileSync</code>æ–¹æ³•å’Œ<code>fs.writeFileSync()</code>æ–¹æ³•é€‚åˆæ‹·è´ä¸€äº›å°æ–‡ä»¶ï¼Œä½†æ˜¯å¦‚æœæƒ³ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ–‡ä»¶è¯»å–åˆ°å†…å­˜å†ä¸€æ¬¡æ€§å†™å…¥åˆ°æ–‡ä»¶ä¸­è¿™ä¸¤ç§æ–¹æ³•å°±ä¸é€‚åˆï¼Œå¯¹äºå¤§æ–‡ä»¶ï¼Œæˆ‘ä»¬åªèƒ½è¯»ä¸€ç‚¹å†™ä¸€ç‚¹ï¼Œæµæ–¹å¼éå¸¸é€‚åˆå¤§æ–‡ä»¶çš„è¯»å–</p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;http&quot;</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>);

<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">request, response</span>) =&gt;</span> &#123;
  response.setHeader(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>);
  fs.createReadStream(<span class="hljs-string">&quot;./1.txt&quot;</span>).pipe(fs.createWriteStream(<span class="hljs-string">&quot;./3.txt&quot;</span>));
  response.end(<span class="hljs-string">&quot;hello&quot;</span>);
&#125;);

server.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ è¯·è®¿é—® http://localhost:3000/&quot;</span>);
&#125;);</code></pre></div><p>ä»¥ä¸Šä»£ç ä½¿ç”¨<code>fs.createReadStream()</code>æ–¹æ³•åˆ›å»ºç¬¬ä¸€ä¸ªæºæ–‡ä»¶åªè¯»æ•°æ®æµï¼Œä½¿ç”¨<code>fs.createWriteStream()</code>æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªç›®æ ‡æ–‡ä»¶çš„åªå†™æ•°æ®æµï¼Œä½¿ç”¨<code>pipe</code>æ–¹æ³•æŠŠä¸¤ä¸ªæ•°æ®æµè¿æ¥èµ·æ¥ï¼Œæ•´ä¸ªè¯»å†™è¿‡ç¨‹å¦‚ä¸‹å›¾</p><p><img src="https://files.alexhchu.com/2020/09/27/b2ca4cab3eec1.png" srcset="/img/loading.gif" alt="image-20200927110116025"></p><h2 id="PATHæ¨¡å—"><a href="#PATHæ¨¡å—" class="headerlink" title="PATHæ¨¡å—"></a>PATHæ¨¡å—</h2><p><code>PATH</code>æ¨¡å—çš„ä¸»è¦åŠŸèƒ½æ˜¯ç”¨æ¥å¤„ç†è·¯å¾„çš„å·¥å…·ï¼Œå¯ä»¥ç®€åŒ–è·¯å¾„çš„ç›¸å…³æ“ä½œ</p><ul><li><p><code>path.normalize</code></p><p>å°†ä¼ å…¥çš„è·¯å¾„è½¬æ¢ä¸ºæ ‡å‡†è·¯å¾„ï¼Œé™¤äº†å¯ä»¥è§£æè·¯å¾„ä¸­çš„<code>.</code>å’Œ<code>..</code>å¤–ï¼Œè¿˜å¯ä»¥å»é™¤å¤šä½™çš„æ–œæ </p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> cache = &#123;&#125;;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span>(<span class="hljs-params">key, value</span>) </span>&#123;
    cache[path.normalize(key)] = value;
&#125;

store(<span class="hljs-string">&#x27;foo/bar&#x27;</span>, <span class="hljs-number">1</span>);
store(<span class="hljs-string">&#x27;foo//baz//../bar&#x27;</span>, <span class="hljs-number">2</span>);
<span class="hljs-built_in">console</span>.log(cache);  <span class="hljs-comment">//  &#123; &quot;foo/bar&quot;: 2 &#125;</span></code></pre></div></li></ul><ul><li><p><code>path.extname</code></p><p>å¯ä»¥è·å–æ–‡ä»¶çš„åç¼€åï¼Œå½“æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒæ–‡ä»¶çš„åç¼€ååšä¸åŒæ“ä½œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•</p><div class="hljs"><pre><code class="hljs javascript">path.extname(<span class="hljs-string">&#x27;server.js&#x27;</span>); <span class="hljs-comment">// =&gt; &quot;.js&quot;</span></code></pre></div></li></ul><h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><ul><li><code>Buffer</code>æ˜¯ç”¨æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒº</li><li>é™¤äº†è¯»å–æ–‡ä»¶è·å–<code>Buffer</code>ä»¥å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥æ„é€ </li><li><code>Buffer</code>å°† JS çš„æ•°æ®å¤„ç†èƒ½åŠ›ä»å­—ç¬¦ä¸²æ‰©å±•åˆ°äº†ä»»æ„äºŒè¿›åˆ¶æ•°æ®</li></ul><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> bin = <span class="hljs-keyword">new</span> Buffer([ <span class="hljs-number">0x68</span>, <span class="hljs-number">0x65</span>, <span class="hljs-number">0x6c</span>, <span class="hljs-number">0x6c</span>, <span class="hljs-number">0x6f</span> ]);</code></pre></div><p><code>Buffer</code>ä¸å­—ç¬¦ä¸²ç±»ä¼¼ï¼Œå¯ä»¥ç”¨<code>length</code>å±æ€§è·å¾—å­—èŠ‚é•¿åº¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>[]</code>æ–¹å¼å»è¯»æŒ‡å®šä½ç½®çš„å­—èŠ‚</p><div class="hljs"><pre><code class="hljs javascript">bin[<span class="hljs-number">0</span>]; <span class="hljs-comment">//  0x68;</span></code></pre></div><p><code>Buffer</code>ä¸å­—ç¬¦ä¸²å¯ä»¥ç›¸äº’è½¬åŒ–ï¼Œå¯ä»¥å°†æŒ‡å®šçš„äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²</p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> str = bin.toString(<span class="hljs-string">&#x27;utf-8&#x27;</span>); <span class="hljs-comment">// =&gt; &quot;hello&quot;</span></code></pre></div><h2 id="Stream-æ•°æ®æµ"><a href="#Stream-æ•°æ®æµ" class="headerlink" title="Stream (æ•°æ®æµ)"></a>Stream (æ•°æ®æµ)</h2><p>å½“å†…å­˜ä¸­æ— æ³•ä¸€æ¬¡æ€§å­˜å‚¨éœ€è¦å¤„ç†çš„æ•°æ®ï¼Œå¯ä»¥æ”¹ä¸ºä¸€è¾¹è¯»å–ä¸€è¾¹å¤„ç†çš„æ–¹æ³•ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°æ•°æ®æµï¼ŒNodeJsä¸­å¯ä»¥ä½¿ç”¨ <code>Stream</code>æ¥å¯¹æ•°æ®æµè¿›è¡Œæ“ä½œ</p><p>æ‰€æœ‰çš„<code>Stream</code>å¯¹è±¡éƒ½æ˜¯<code>EventEmitter</code> çš„å®ä¾‹ã€‚å¸¸ç”¨çš„äº‹ä»¶æœ‰ï¼š</p><ul><li><code>data</code>ï¼šå½“æœ‰æ•°æ®å¯è¯»å–æ—¶è§¦å‘</li><li><code>end</code>ï¼šæ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»å–æ—¶è§¦å‘</li><li><code>error</code>ï¼šåœ¨æ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</li><li><code>finish</code>ï¼šæ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘</li></ul><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> rs = fs.createReadStream(pathname);

rs.on(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">chunk</span>) </span>&#123;
    doSomething(chunk);
&#125;);

rs.on(<span class="hljs-string">&#x27;end&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    cleanUp();
&#125;);</code></pre></div><p>ä¸Šè¿°ä»£ç ä¸­<code>data</code>äº‹ä»¶ä¼šä¸€ç›´è§¦å‘ï¼Œä¸ç®¡<code>doSomething</code>å‡½æ•°æ˜¯å¦èƒ½å¤„ç†è¿‡æ¥,<code>createReadStream()</code>ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è§£å†³æ­¤é—®é¢˜</p><ul><li><code>rs.pause()</code> æš‚åœè¯»å–,ä¼šæš‚åœdataäº‹ä»¶çš„è§¦å‘ï¼Œå°†æµåŠ¨æ¨¡å¼è½¬å˜éæµåŠ¨æ¨¡å¼</li><li><code>rs.resume()</code>æ¢å¤dataäº‹ä»¶,ç»§ç»­è¯»å–ï¼Œå˜ä¸ºæµåŠ¨æ¨¡å¼</li></ul><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> rs = fs.createReadStream(src);

rs.on(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">chunk</span>) </span>&#123;
    rs.pause();
    doSomething(chunk, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
        rs.resume();
    &#125;);
&#125;);

rs.on(<span class="hljs-string">&#x27;end&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
    cleanUp();
&#125;);</code></pre></div><p>ä¸Šè¿°ä»£ç ç»™<code>doSomething</code>å‡½æ•°æ·»åŠ äº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨å¤„ç†æ•°æ®å‰æš‚åœæ•°æ®è¯»å–ï¼Œåœ¨å¤„ç†åç»§ç»­è¯»å–æ•°æ®</p><p>éå†ç›®å½•æ˜¯æ“ä½œæ–‡ä»¶æ—¶çš„ä¸€ä¸ªå¸¸è§éœ€æ±‚ã€‚æ¯”å¦‚å†™ä¸€ä¸ªç¨‹åºï¼Œéœ€è¦æ‰¾åˆ°å¹¶å¤„ç†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰JSæ–‡ä»¶æ—¶ï¼Œå°±éœ€è¦éå†æ•´ä¸ªç›®å½•ã€‚</p><h2 id="éå†ç›®å½•"><a href="#éå†ç›®å½•" class="headerlink" title="éå†ç›®å½•"></a>éå†ç›®å½•</h2><h3 id="é€’å½’ç®—æ³•"><a href="#é€’å½’ç®—æ³•" class="headerlink" title="é€’å½’ç®—æ³•"></a>é€’å½’ç®—æ³•</h3><p>éå†ç›®å½•æ—¶ä¸€èˆ¬ä½¿ç”¨é€’å½’ç®—æ³•ï¼Œå¦åˆ™å°±éš¾ä»¥ç¼–å†™å‡ºç®€æ´çš„ä»£ç ã€‚é€’å½’ç®—æ³•ä¸æ•°å­¦å½’çº³æ³•ç±»ä¼¼ï¼Œé€šè¿‡ä¸æ–­ç¼©å°é—®é¢˜çš„è§„æ¨¡æ¥è§£å†³é—®é¢˜ã€‚ä»¥ä¸‹ç¤ºä¾‹è¯´æ˜äº†è¿™ç§æ–¹æ³•ã€‚</p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">factorial</span>(<span class="hljs-params">n</span>) </span>&#123;
    <span class="hljs-keyword">if</span> (n === <span class="hljs-number">1</span>) &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    &#125; <span class="hljs-keyword">else</span> &#123;
        <span class="hljs-keyword">return</span> n * factorial(n - <span class="hljs-number">1</span>);
    &#125;
&#125;</code></pre></div><p>ä¸Šè¾¹çš„å‡½æ•°ç”¨äºè®¡ç®—Nçš„é˜¶ä¹˜ï¼ˆN!ï¼‰ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå½“Nå¤§äº1æ—¶ï¼Œé—®é¢˜ç®€åŒ–ä¸ºè®¡ç®—Nä¹˜ä»¥N-1çš„é˜¶ä¹˜ã€‚å½“Nç­‰äº1æ—¶ï¼Œé—®é¢˜è¾¾åˆ°æœ€å°è§„æ¨¡ï¼Œä¸éœ€è¦å†ç®€åŒ–ï¼Œå› æ­¤ç›´æ¥è¿”å›1ã€‚</p><blockquote><p><strong>é™·é˜±ï¼š</strong> ä½¿ç”¨é€’å½’ç®—æ³•ç¼–å†™çš„ä»£ç è™½ç„¶ç®€æ´ï¼Œä½†ç”±äºæ¯é€’å½’ä¸€æ¬¡å°±äº§ç”Ÿä¸€æ¬¡å‡½æ•°è°ƒç”¨ï¼Œåœ¨éœ€è¦ä¼˜å…ˆè€ƒè™‘æ€§èƒ½æ—¶ï¼Œéœ€è¦æŠŠé€’å½’ç®—æ³•è½¬æ¢ä¸ºå¾ªç¯ç®—æ³•ï¼Œä»¥å‡å°‘å‡½æ•°è°ƒç”¨æ¬¡æ•°ã€‚</p></blockquote><h3 id="éå†ç®—æ³•"><a href="#éå†ç®—æ³•" class="headerlink" title="éå†ç®—æ³•"></a>éå†ç®—æ³•</h3><p>ç›®å½•æ˜¯ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œåœ¨éå†æ—¶ä¸€èˆ¬ä½¿ç”¨æ·±åº¦ä¼˜å…ˆ+å…ˆåºéå†ç®—æ³•ã€‚æ·±åº¦ä¼˜å…ˆï¼Œæ„å‘³ç€åˆ°è¾¾ä¸€ä¸ªèŠ‚ç‚¹åï¼Œé¦–å…ˆæ¥ç€éå†å­èŠ‚ç‚¹è€Œä¸æ˜¯é‚»å±…èŠ‚ç‚¹ã€‚å…ˆåºéå†ï¼Œæ„å‘³ç€é¦–æ¬¡åˆ°è¾¾äº†æŸèŠ‚ç‚¹å°±ç®—éå†å®Œæˆï¼Œè€Œä¸æ˜¯æœ€åä¸€æ¬¡è¿”å›æŸèŠ‚ç‚¹æ‰ç®—æ•°ã€‚å› æ­¤ä½¿ç”¨è¿™ç§éå†æ–¹å¼æ—¶ï¼Œä¸‹è¾¹è¿™æ£µæ ‘çš„éå†é¡ºåºæ˜¯<code>A &gt; B &gt; D &gt; E &gt; C &gt; F</code>ã€‚</p><div class="hljs"><pre><code class="hljs latex">    A
   / <span class="hljs-tag">\</span>
  B   C
 / <span class="hljs-tag">\<span class="hljs-name"> </span></span>  <span class="hljs-tag">\</span>
D   E   F</code></pre></div><h3 id="åŒæ­¥éå†"><a href="#åŒæ­¥éå†" class="headerlink" title="åŒæ­¥éå†"></a>åŒæ­¥éå†</h3><p>äº†è§£äº†å¿…è¦çš„ç®—æ³•åï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å®ç°ä»¥ä¸‹ç›®å½•éå†å‡½æ•°ã€‚</p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">travel</span>(<span class="hljs-params">dir, callback</span>) </span>&#123;
    fs.readdirSync(dir).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">file</span>) </span>&#123;
        <span class="hljs-keyword">var</span> pathname = path.join(dir, file);

        <span class="hljs-keyword">if</span> (fs.statSync(pathname).isDirectory()) &#123;
            travel(pathname, callback);
        &#125; <span class="hljs-keyword">else</span> &#123;
            callback(pathname);
        &#125;
    &#125;);
&#125;</code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè¯¥å‡½æ•°ä»¥æŸä¸ªç›®å½•ä½œä¸ºéå†çš„èµ·ç‚¹ã€‚é‡åˆ°ä¸€ä¸ªå­ç›®å½•æ—¶ï¼Œå°±å…ˆæ¥ç€éå†å­ç›®å½•ã€‚é‡åˆ°ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå°±æŠŠæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ä¼ ç»™å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°æ‹¿åˆ°æ–‡ä»¶è·¯å¾„åï¼Œå°±å¯ä»¥åšå„ç§åˆ¤æ–­å’Œå¤„ç†ã€‚å› æ­¤å‡è®¾æœ‰ä»¥ä¸‹ç›®å½•ï¼š</p><div class="hljs"><pre><code class="hljs text">- /home/user/
    - foo/
        x.js
    - bar/
        y.js
    z.css</code></pre></div><p>ä½¿ç”¨ä»¥ä¸‹ä»£ç éå†è¯¥ç›®å½•æ—¶ï¼Œå¾—åˆ°çš„è¾“å…¥å¦‚ä¸‹ã€‚</p><div class="hljs"><pre><code class="hljs javascript">travel(<span class="hljs-string">&#x27;/home/user&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">pathname</span>) </span>&#123;
    <span class="hljs-built_in">console</span>.log(pathname);
&#125;);

------------------------
/home/user/foo/x.js
/home/user/bar/y.js
/home/user/z.css</code></pre></div><h3 id="å¼‚æ­¥éå†"><a href="#å¼‚æ­¥éå†" class="headerlink" title="å¼‚æ­¥éå†"></a>å¼‚æ­¥éå†</h3><p>å¦‚æœè¯»å–ç›®å½•æˆ–è¯»å–æ–‡ä»¶çŠ¶æ€æ—¶ä½¿ç”¨çš„æ˜¯å¼‚æ­¥APIï¼Œç›®å½•éå†å‡½æ•°å®ç°èµ·æ¥ä¼šæœ‰äº›å¤æ‚ï¼Œä½†åŸç†å®Œå…¨ç›¸åŒã€‚<code>travel</code>å‡½æ•°çš„å¼‚æ­¥ç‰ˆæœ¬å¦‚ä¸‹ã€‚</p><div class="hljs"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">travel</span>(<span class="hljs-params">dir, callback, finish</span>) </span>&#123;
    fs.readdir(dir, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, files</span>) </span>&#123;
        (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">next</span>(<span class="hljs-params">i</span>) </span>&#123;
            <span class="hljs-keyword">if</span> (i &lt; files.length) &#123;
                <span class="hljs-keyword">var</span> pathname = path.join(dir, files[i]);

                fs.stat(pathname, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, stats</span>) </span>&#123;
                    <span class="hljs-keyword">if</span> (stats.isDirectory()) &#123;
                        travel(pathname, callback, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
                            next(i + <span class="hljs-number">1</span>);
                        &#125;);
                    &#125; <span class="hljs-keyword">else</span> &#123;
                        callback(pathname, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
                            next(i + <span class="hljs-number">1</span>);
                        &#125;);
                    &#125;
                &#125;);
            &#125; <span class="hljs-keyword">else</span> &#123;
                finish &amp;&amp; finish();
            &#125;
        &#125;(<span class="hljs-number">0</span>));
    &#125;);
&#125;</code></pre></div></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E5%90%8E%E7%AB%AF/">åç«¯</a> <a class="hover-with-bg" href="/categories/%E5%90%8E%E7%AB%AF/NodeJS/">NodeJS</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/NodeJs/">NodeJs</a></div></div><p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p><div class="post-prevnext row"><article class="post-prev col-6"><a href="/posts/496507a6/index.html"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Koa2æ¡†æ¶å­¦ä¹ åŸºæœ¬è¯­æ³•å’Œä½¿ç”¨</span> <span class="visible-mobile">Previous</span></a></article><article class="post-next col-6"> <a href="/posts/15/index.html"><span class="hidden-mobile">å›¾è§£HTTPç¬¬äº”ç« ï¼šä¸ HTTP åä½œçš„ Web æœåŠ¡å™¨</span> <span class="visible-mobile">Next</span><i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">Search</h4> <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"> <input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">keyword</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"> <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>é¡µè„š</span></a><i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div></footer><script src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:200}),NProgress.start(),document.addEventListener("DOMContentLoaded",function(){window.NProgress&&window.NProgress.inc()}),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js"></script><script src="/js/debouncer.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/lazyload.js"></script><script src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js"></script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js"></script><script defer="defer" src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script><script src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/js/local-search.js"></script><script>document.querySelector("#local-search-input").onclick=function(){searchFunc("/local-search.xml","local-search-input","local-search-result"),this.onclick=null}</script><script defer="defer">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?7c3a86d2ad975111fcb1544184425260";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="/js/boot.js"></script></body></html>